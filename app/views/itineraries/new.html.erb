<div class="container-fluid">
  <%= render 'shared/recap-bar' %>
  <div class="row m-2">
    <div class="col-12 col-sm-7">
      <% @itineraries.reverse.each do |itinerary| %>
      <div class="mr-3 mb-3">
        <div class="card main-card card<%= itinerary.id %>">
          <div class="card-body p-4">
            <div class="d-flex justify-content-between">
              <div class="d-flex justify-content-start align-items-end"><h5 class="card-title mr-3">Sex on the beach</h5><p id="shared-by"><em>shared by </em>Bob</p></div>
              <div>
                <%= link_to "", "#{bookmarks_path}?query=create&itinerary=#{itinerary.id}", method: :get, class: 'far fa-bookmark bookmark-icon' %>
              </div>
            </div>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Diam sagittis accumsan ut posuere commodo. Enim mattis eget vestibulum bibendum ut ipsum at.</p>
            <div class= "d-flex justify-content-between align-items-end">
              <div>
                <div class="d-flex justify-content-start h-25 mb-2"><span></span><p class="input"><%= itinerary.days %> days</p></div>
                <div class="d-flex justify-content-start h-25 mb-2"><span></span><p class="input">$<%= itinerary.budget %></p></div>
                <div class="d-flex justify-content-start h-25 mb-2"><span class="card-rating-icon"></span><p class="input"><i class="fas fa-star"></i> 4.2</p></div>
              </div>
              <div>
                <button class="button">
                <%= simple_form_for(@new_itinerary) do |f| %>
                  <%#= hidden_field_tag :id, value: itinerary.id %>
                  <%= f.hidden_field :id, value: itinerary.id %>
                  <%= f.hidden_field :experience, value: params[:search][:experience] %>
                  <%= f.hidden_field :country, value: params[:search][:country] %>
                  <%= f.hidden_field :budget, value: params[:search][:budget] %>
                  <%= f.hidden_field :days, value: params[:search][:days] %>
                  <%= f.submit "Build your adventure" %>
                <% end %>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% end %>
    </div>
    <div class="col-5 mb-2">
      <%= render 'shared/itinerary-carousel' %>
    </div>
  </div>
</div>
<!-- ###################################################################################### -->
<div class="container-fluid d-none">
  <h1>Itineraries#new</h1>
  <p>Find me in app/views/itineraries/new.html.erb</p>
  <hr>
  <% params_str = "utf8=âœ“&" %>
  <% params[:search].each do |key, value| %>
    <% params_str += "search%5B#{key}%5D=#{value}&" %>
  <% end %>
  <% params_str += "commit=Create+Search" %>
  <% @itineraries.reverse.each do |itinerary| %>
    <%# next if itinerary.id == 1 %>
    <div class="card" style="width: 18rem;">
      <img src="#" class="card-img-top" alt="image">
      <div class="card-body">
        <h5 class="card-title">Card with stretched link <%= itinerary.id %></h5>
        <div class="card-text">
          <ul class="list-unstyled">
            <li><%= itinerary.cities.first.name if itinerary.cities.size.positive? %></li>
            <li><%= itinerary.spots.first.title if itinerary.spots.size.positive? %></li>
          </ul>
        </div>
        <!-- <a href="#" class="btn btn-primary stretched-link">Go somewhere</a> -->
        <div class="d-flex justify-content-between">
          <%= simple_form_for(@new_itinerary) do |f| %>
            <%#= hidden_field_tag :id, value: itinerary.id %>
            <%= f.hidden_field :id, value: itinerary.id %>
            <%= f.hidden_field :experience, value: params[:search][:experience] %>
            <%= f.hidden_field :country, value: params[:search][:country] %>
            <%= f.hidden_field :budget, value: params[:search][:budget] %>
            <%= f.hidden_field :days, value: params[:search][:days] %>
            <%= f.submit "submit", class: "btn btn-info" %>
          <% end %>
          <%# raise %>
          <% if itinerary.bookmark %>
            <div id="bookmark-delete-id-<%= itinerary.id %>">
              <%= link_to raw("<i class=\"fas fa-star\"></i>"), "#{new_itinerary_path}?#{params_str}&query=delete&itinerary=#{itinerary.id}", remote: true, method: :get, class: 'btn' %>
            </div>
            <div id="bookmark-create-id-<%= itinerary.id %>">
              <%= link_to raw("<i class=\"far fa-star\"></i>"), "#{new_itinerary_path}?#{params_str}&query=create&itinerary=#{itinerary.id}", remote: true, method: :get, class: 'btn' %>
            </div>
            <script type="text/javascript">
              elementTrue = document.querySelector('<%= "#bookmark-create-id-#{itinerary.id}" %>');
              elementFalse = document.querySelector('<%= "#bookmark-delete-id-#{itinerary.id}" %>');
              elementTrue.style.display = 'none';
              elementFalse.style.display = 'block';
            </script>
          <% else %>
            <div id="bookmark-delete-id-<%= itinerary.id %>">
              <%= link_to raw("<i class=\"fas fa-star\"></i>"), "#{new_itinerary_path}?#{params_str}&query=delete&itinerary=#{itinerary.id}", remote: true, method: :get, class: 'btn' %>
            </div>
            <div id="bookmark-create-id-<%= itinerary.id %>">
              <%= link_to raw("<i class=\"far fa-star\"></i>"), "#{new_itinerary_path}?#{params_str}&query=create&itinerary=#{itinerary.id}", remote: true, method: :get, class: 'btn' %>
            </div>
            <script type="text/javascript">
              elementTrue = document.querySelector('<%= "#bookmark-create-id-#{itinerary.id}" %>');
              elementFalse = document.querySelector('<%= "#bookmark-delete-id-#{itinerary.id}" %>');
              elementTrue.style.display = 'block';
              elementFalse.style.display = 'none';
            </script>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
